@use 'sass:math';
@import '../../Misc/colors.scss';

@mixin has-tooltip($tooltip-transition-in-duration: 0.3s) {
    position: relative;
    // Prevent the tooltip from being clipped by its container.
    overflow: visible;

    // Display the tooltip on hover and on focus.
    &:hover,
    &:focus {
        .tooltip {
            visibility: visible;
            transform: translate(-10%, 0); // horizontally centered
            transition: visibility 0s linear 0s, opacity $tooltip-transition-in-duration ease-out 0s,
                transform $tooltip-transition-in-duration ease-out 0s;
            opacity: 1;
        }
    }
}

@mixin tooltip(
    $tooltip-background-color: white,
    $tooltip-arrow-base: 2em,
    $tooltip-arrow-length: 1em,
    $tooltip-border-width: 0,
    $tooltip-border-color: transparent,
    $tooltip-transition-out-duration: 0.3s
) {

    // Animated properties.
    visibility: hidden;
    position: absolute;
    top: 100%; // displayed on top
    left: 50%;
    // Sizing and positioning
    box-sizing: border-box;
    margin-top: $tooltip-arrow-length;
    transform: translate(-10%, $tooltip-arrow-length);
    transition: visibility 0s linear $tooltip-transition-out-duration,
        opacity $tooltip-transition-out-duration ease-in 0s, transform $tooltip-transition-out-duration ease-in 0s;
    opacity: 0;

    // Text and color properties.
    background-color: $tooltip-background-color;
    text-align: center;

    // Disable events.
    pointer-events: none;

    &::after {
        content: '';
        position: absolute;
        bottom: 100%;
        left: 10%;
        width: 0;
        height: 0;
        // Center the triangle.
        margin-left: ($tooltip-border-width - math.div($tooltip-arrow-base, 2));
        border-right: (math.div($tooltip-arrow-base, 2) - $tooltip-border-width) solid transparent;
        // Draw a triangle.
        border-bottom: ($tooltip-arrow-length - $tooltip-border-width) solid $tooltip-background-color;
        border-left: (math.div($tooltip-arrow-base, 2) - $tooltip-border-width) solid transparent;
    }

    // Specific styles when the tooltip has a border
    @if $tooltip-border-width {
        border: $tooltip-border-width solid $tooltip-border-color;

        &::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 10%;
            width: 0;
            height: 0;
            // Center the triangle.
            margin-left: math.div($tooltip-arrow-base, -2);
            border-right: math.div($tooltip-arrow-base, 2) solid transparent;
            // Draw another triangle to simulate a border.
            border-bottom: $tooltip-arrow-length solid $tooltip-border-color;
            border-left: math.div($tooltip-arrow-base, 2) solid transparent;
        }
    }
}

.has-tooltip {
    @include has-tooltip($tooltip-transition-in-duration: 0.3s);
}

.tooltip {
    min-width: 15em;
    padding: 0.9em 0.1em;
    box-shadow: 0 0.05em 0.15em rgba(0, 0, 0, 0.1);
    font-size: 14px;
}

.tooltip-without-border {
    @include tooltip(
        $tooltip-background-color: $Gray,
        $tooltip-arrow-base: 1em,
        $tooltip-arrow-length: 0.6em,
        $tooltip-transition-out-duration: 0.2s,
        $tooltip-border-width: 1,
        $tooltip-border-color: $G4
    );

    z-index: 999;
    border: 1px solid $G4;
    border-radius: 6px;
    color: $TextColor;
}
